(function(b){b.carousel=function(d,f,e,h){var k=!1,a=this;a.timer=!1;a.init=function(){a.settings=b.extend({},b.carousel.defaults,f);("function"!=typeof a.settings.prevBtnInner||"function"!=typeof a.settings.nextBtnInner)&&b.error(e.selector+": prevBtnInner and nextBtnInner must be functions");if("continious"==a.settings.mode.toLowerCase())a.settings.transition="slide";if(a.settings.wrapAt){var c,i=b(d).find(a.settings.wrapTag);i.length||b.error(e.selector+': Wrap at was unable to find the set selector "'+
a.settings.wrapTag+'"');i.wrapAll("<ul />").each(function(b){0==b%parseInt(a.settings.wrapAt)&&b&&(c=b,i.slice(b-parseInt(a.settings.wrapAt),b).wrapAll("<li />"))}).slice(c,i.length).wrapAll("<li />")}"ul"!=b(d)[0].nodeName.toLowerCase()?b(d).find("ul").length?a.$ul=b(d).find("ul"):b.error(e.selector+": Carousel requires there be a UL within the provided element"):a.$ul=b(d);if(!a.settings.step)a.settings.step=a.settings.show;if(("auto"==a.settings.mode.toLowerCase()||"continious"==a.settings.mode.toLowerCase())&&
"none"==a.settings.wrap.toLowerCase())a.settings.wrap="circular";switch(a.settings.direction.toLowerCase()){case "vert":case "tb":case "bt":a.settings.TYPE="vertical";break;case "horz":case "rtl":case "ltr":a.settings.TYPE="horizontal";break;default:b.error(e.selector+": Provided direction is unrecgonized")}switch(a.settings.mode.toLowerCase()){case "auto":a.settings.duration=a.settings.duration?a.settings.duration:3E3;var j=a.settings,g;a:switch(a.settings.transition.toLowerCase()){case "slide":g=
a.settings.speed?a.settings.speed:250*a.settings.step;break a;case "fade":case "crossfade":case "xfade":g=a.settings.speed?a.settings.speed:500;break a;default:b.error(e.selector+": Unknown transition effect: "+a.settings.transition)}j.speed=g;break;case "continious":a.settings.duration=a.settings.duration?a.settings.duration:800;break;case "manual":g=a.settings;a:switch(a.settings.transition.toLowerCase()){case "slide":j=a.settings.speed?a.settings.speed:250*a.settings.step;break a;case "fade":case "crossfade":case "xfade":j=
a.settings.speed?a.settings.speed:500;break a;default:b.error(e.selector+": Unknown transition effect: "+a.settings.transition)}g.speed=j;break;default:b.error(e.selector+": Unrecgonized mode")}a.$ul.wrap(b("<div />").addClass("carousel-wrapper").addClass(a.settings.TYPE));a.$ul.wrap(b("<div />").addClass("stage"));a.$ul.wrap(b("<div />").addClass("mask"));a.$ul.addClass("carousel");a.$mask=a.$ul.parent();a.$stage=a.$mask.parent();a.$wrapper=a.$stage.parent();a.settings.buffer&&a.$ul.find(">li").each(function(){if(parseInt(0<
b(this).css("v"==a.settings.TYPE.substr(0,1)?"margin-bottom":"margin-right")))b(this).css("v"==a.settings.TYPE.substr(0,1)?"margin-bottom":"margin-right",0)});a.settings.LIGAP="v"==a.settings.TYPE.substr(0,1)?parseInt(a.$ul.find(">li:eq(0)").css("margin-top"))!=parseInt(a.$ul.find(">li:eq(0)").css("margin-top"))?Math.max(parseInt(a.$ul.find(">li:eq(0)").css("margin-top")),parseInt(a.$ul.find(">li:eq(0)").css("margin-top"))):parseInt(a.$ul.find(">li:eq(0)").css("margin-top")):a.$ul.find(">li:eq(0)").outerWidth(!0)-
a.$ul.find(">li:eq(0)").width();a.settings.USABLEAREA=a.settings.maskSize-a.settings.LIGAP*a.settings.show-(a.settings.buffer?a.settings.LIGAP:0);a.$ul.find(">li").css(a.getSizeTerm(),Math.floor(a.settings.USABLEAREA/a.settings.show));a.settings.LISIZE=("v"==a.settings.TYPE.substr(0,1)?a.$ul.find(">li:eq(0)").height():a.$ul.find(">li:eq(0)").width())+a.settings.LIGAP;a.settings.PAGES=Math.ceil(a.$ul.find(">li").length/a.settings.show);a.settings.MASKSIZE=a.settings.show*a.settings.LISIZE+(a.settings.buffer?
a.settings.LIGAP:0);a.$mask.css(a.getSizeTerm(),a.settings.MASKSIZE+"px");0!=a.settings.USABLEAREA%a.settings.show&&a.$mask.css("v"==a.settings.TYPE.substr(0,1)?"margin-bottom":"margin-right",a.settings.USABLEAREA%a.settings.show);if("circular"==a.settings.wrap.toLowerCase()){if(0!=a.$ul.find(">li").length%a.settings.show){g=a.$ul.find(">li");for(j=1;j<a.settings.show;j++)a.$ul.append(g.clone().addClass("cloned"))}0==a.$ul.find(">li").length%a.settings.show&&"xfade"!=a.settings.transition.toLowerCase()&&
"crossfade"!=a.settings.transition.toLowerCase()&&(a.$ul.find(">li").slice(-a.settings.show).clone().addClass("cloned").prependTo(a.$ul),a.$ul.find(">li").slice(a.settings.show,2*a.settings.show).clone().addClass("cloned").appendTo(a.$ul));a.$ul.css("v"==a.settings.TYPE.substr(0,1)?"top":"left",-(a.settings.LISIZE*a.settings.show)+"px")}a.$ul.css("v"==a.settings.TYPE.substr(0,1)?"height":"width",a.settings.LISIZE*a.$ul.find(">li").length);"h"==a.settings.TYPE.substr(0,1)&&(a.$wrapper.find("img").length?
b(window).load(function(){a.$mask.css("height",function(){var c=0;a.$ul.find(">li").each(function(){c=b(this).outerHeight(!0)>c?b(this).outerHeight(!0):c});return c}())}):a.$mask.css("height",a.$ul.outerHeight(!0)));if("crossfade"==a.settings.transition.toLowerCase()||"xfade"==a.settings.transition.toLowerCase())i=a.$ul.find(">li"),i.each(function(d){0==d%parseInt(a.settings.show)&&d&&(c=d,i.slice(d-parseInt(a.settings.show),d).wrapAll(b("<ul />")).parent().wrap(b("<li />").addClass("xfade").css(a.getSizeTerm(),
a.$mask.css(a.getSizeTerm()))))}).slice(c,i.length).wrapAll(b("<ul />")).parent().wrap(b("<li />").addClass("xfade").css(a.getSizeTerm(),a.$mask.css(a.getSizeTerm()))),a.$ul.css("v"==a.settings.TYPE.substr(0,1)?"top":"left",0).find(">li:gt(0)").hide(),a.$wrapper.addClass("xfade");a.$wrapper.find("img").length?b(window).load(function(){a.makeControls()}):a.makeControls()};a.rotate=function(c){if(a.$ul.is(":not(:animated)")){var d="number"==typeof c,e=d?-((c*a.settings.show-a.settings.show)*a.settings.LISIZE+
("circular"==a.settings.wrap.toLowerCase()?a.settings.show:0)*a.settings.LISIZE):a.settings.LISIZE*a.settings.step*("next"==c?-1:1)+a.getCurrentPosition(),g="v"==a.settings.TYPE.substr(0,1)?{top:e+"px"}:{left:e+"px"},f=function(){"circular"==a.settings.wrap.toLowerCase()&&a.executeCircularWrap();b(".pages li",a.$wrapper).length&&1>=a.getCurrentLI()%a.settings.show&&b(".pages li",a.$wrapper).removeClass("active").eq(a.getCurrentPage()-1).addClass("active");a.isAuto()&&a.restartAuto()},h=function(){if("none"==
a.settings.wrap.toLowerCase())if(a.$wrapper.find(".btn").removeClass("disabled"),"crossfade"==a.settings.transition.toLowerCase()||"xfade"==a.settings.transition.toLowerCase())a.$ul.find(">li:visible").is(":first-child")?a.$wrapper.find(".previous").addClass("disabled"):a.$ul.find(">li:visible").is(":last-child")&&a.$wrapper.find(".next").addClass("disabled");else if(0<=e||e<=-(a.getWidth()-a.settings.show*a.settings.LISIZE))a.$wrapper.find("."+("number"==typeof c&&c>a.getCurrentPage()||"next"==c?
"next":"previous")).addClass("disabled")};switch(!0){case "crossfade"==a.settings.transition.toLowerCase()||"xfade"==a.settings.transition.toLowerCase():var l=a.$ul.find(">li:visible"),k=d?a.$ul.find(">li:eq("+(c-1)+")"):"next"==c?l.next().length?l.next():a.$ul.find(">li:eq(0)"):l.prev().length?l.prev():a.$ul.find(">li:last");l.fadeOut(a.settings.speed);k.fadeIn(a.settings.speed,function(){d?b(".pages li",a.$wrapper).removeClass("active").eq(c-1).addClass("active"):b(".pages li",a.$wrapper).removeClass("active").eq(k.index()).addClass("active");
h();a.isAuto()&&a.restartAuto()});break;case "fade"==a.settings.transition.toLowerCase()&&"continious"!=a.settings.mode.toLowerCase():h();a.$ul.fadeOut(a.settings.speed,function(){a.$ul.css(g).fadeIn(a.settings.speed,f);a.isAuto()&&a.restartAuto()});break;default:h(),a.$ul.animate(g,a.settings.speed,f)}}};a.isAuto=function(){return a.settings.mode.match(/continious|auto/i)};a.restartAuto=function(){a.stopAuto();a.startAuto()};a.startAuto=function(){"continious"==a.settings.mode.toLowerCase()?(a.startContiniousSlide(),
a.settings.makePlayPause||(a.$wrapper.mouseenter(function(){a.stopAuto()}),a.$wrapper.mouseleave(function(){a.startContiniousSlide()}))):a.timer=window.setInterval(function(){switch(a.settings.direction.toLowerCase()){case "vert":case "horz":case "ltr":case "tb":a.rotate("next");break;case "rtl":case "bt":a.rotate("previous");break;default:b.error(e.selector+": Unknown direction supplied")}},a.settings.duration);a.$playPause&&a.$playPause.find(">span").removeClass("play").addClass("pause")};a.stopAuto=
function(){"continious"==a.settings.mode.toLowerCase()?a.$ul.stop():a.timer&&window.clearInterval(a.timer);a.$playPause&&a.$playPause.find(">span").removeClass("pause").addClass("play")};a.startContiniousSlide=function(){var b="v"==a.settings.TYPE.substr(0,1)?{top:-(a.getWidth()-a.settings.show*a.settings.LISIZE)}:{left:-(a.getWidth()-a.settings.show*a.settings.LISIZE)};a.$ul.animate(b,(a.$ul.find(">li").length-2*a.settings.show-a.getCurrentLI())*a.settings.duration,"linear",function(){a.executeCircularWrap();
a.startContiniousSlide()})};a.executeCircularWrap=function(){Math.abs(a.getCurrentPosition())>=Math.abs(a.getWidth()-a.settings.show*a.settings.LISIZE)?a.$ul.css("v"==a.settings.TYPE.substr(0,1)?"top":"left",-(a.settings.show*a.settings.LISIZE)+"px"):0==Math.abs(a.getCurrentPosition())&&a.$ul.css("v"==a.settings.TYPE.substr(0,1)?"top":"left",-(a.getWidth()-2*a.settings.show*a.settings.LISIZE)+"px")};a.getCurrentLI=function(){return Math.abs(a.getCurrentPosition())/a.settings.LISIZE+1-("circular"==
a.settings.wrap.toLowerCase()?a.settings.show:0)};a.getCurrentPage=function(){return Math.ceil(a.getCurrentLI()/a.settings.show)};a.getCurrentPosition=function(){return"v"==a.settings.TYPE.substr(0,1)?a.$ul.position().top:a.$ul.position().left};a.getWidth=function(){return"v"==a.settings.TYPE.substr(0,1)?a.$ul.height():a.$ul.width()};a.bindEvents=function(){("auto"==a.settings.mode.toLowerCase()||"continious"==a.settings.mode.toLowerCase())&&a.startAuto();b(".previous",a.$wrapper).click(function(c){c.preventDefault();
a.stopAuto();b(this).is(":not(.disabled)")&&a.rotate("previous")});b(".next",a.$wrapper).click(function(c){c.preventDefault();a.stopAuto();b(this).is(":not(.disabled)")&&a.rotate("next")});b(".pages li",a.$wrapper).click(function(c){c.preventDefault();b(this).is(":not(.active)")&&a.rotate(b(this).prevAll().length+1)});b(".playPause",a.$wrapper).click(function(){a.$playPause.find(">span").is(".play")?a.startAuto():a.stopAuto()})};a.makeControls=function(){if(!k){a.settings.makeControls&&a.makeBtns();
a.settings.makePagination&&("crossfade"==a.settings.transition.toLowerCase()||"xfade"==a.settings.transition.toLowerCase())?(a.settings.PAGES=a.$ul.find(">li.xfade").length,a.makePagination()):a.settings.makePagination&&"continious"!=a.settings.mode.toLowerCase()&&("circular"!=a.settings.wrap.toLowerCase()||0==a.$ul.find(">li:not(.cloned)").length%a.settings.show)&&a.makePagination();a.settings.makePlayPause&&a.makePlayPause();a.bindEvents();k=!0;if("function"==typeof a.settings.onComplete)a.settings.onComplete(a.settings);
"function"==typeof h&&e.filter(":last")[0]===b(d)[0]&&h()}};a.makePlayPause=function(){if("auto"==a.settings.mode.toLowerCase()||"continious"==a.settings.mode.toLowerCase())a.$playPause=b("<div />").addClass("playPause").append(b("<span />").addClass("play")),a.$wrapper.append(a.$playPause),"h"==a.settings.TYPE.substr(0,1)?a.$wrapper.css("height",a.$wrapper.height()+Math.abs(a.settings.makePagination&&a.$pages?a.$pages.height()-a.$playPause.height():a.$playPause.height())):a.$wrapper.css("width",
a.$wrapper.width()+Math.abs(a.settings.makePagination&&a.$pages?a.$pages.width()-a.$playPause.width():a.$playPause.width()))};a.makeBtns=function(){var c=0;a.$mask.before(b("<div />").addClass("previous btn"+("none"==a.settings.wrap.toLowerCase()?" disabled":"")).html(b("<span />").html(a.settings.prevBtnInner())));a.$mask.after(b("<div />").addClass("next btn"+("none"==a.settings.wrap.toLowerCase()&&2>a.settings.PAGES?" disabled":"")).html(b("<span />").html(a.settings.nextBtnInner())));if("absolute"!=
a.$stage.find(".btn").css("position").toLowerCase())if("v"==a.settings.TYPE.substr(0,1))a.$stage.find(".btn").css("width",a.$mask.width()),a.$stage.find(".btn").each(function(){c+=b(this).outerHeight(!0)}),a.$stage.css("height",a.$mask.outerHeight(!0)+c),a.$wrapper.css("height",a.$stage.outerHeight(!0));else if("h"==a.settings.TYPE.substr(0,1)){var d=parseInt(a.$stage.find(".btn:eq(0) span").css("min-height"));a.$stage.find(".btn").each(function(){c+=b(this).outerWidth(!0)});a.$stage.css("width",
a.$mask.outerWidth(!0)+c);a.$wrapper.css("width",a.$stage.outerWidth(!0));a.$stage.find(".btn").css("height",a.$mask.height()>d?a.$mask.height():d).find("span").css("margin-top","-"+Math.floor(a.$stage.find(".btn span:eq(0)").outerHeight(!0)/2)+"px")}else b.error(e.selector+": Unable to size buttons due to unrecgonized TYPE value")};a.makePagination=function(){for(var c=b("<ul />").addClass("pages"),d=1;d<=a.settings.PAGES;d++)c.append(b("<li />").html(a.settings.pageInner(d)).attr("rel",d));a.$pages=
c;a.$pages.find("li:first-child").addClass("active");a.$wrapper.append(a.$pages);"v"==a.settings.TYPE.substr(0,1)?(a.$pages.css("margin-top","-"+Math.floor(a.$pages.height()/2)+"px"),a.$mask.css("width",a.$wrapper.outerWidth(!0)-a.$pages.outerWidth(!0)-a.$pages.find(">li:eq(0)").outerHeight(!0)+"px")):"h"==a.settings.TYPE.substr(0,1)?(a.$pages.css("margin-left","-"+Math.floor(a.$pages.width()/2)+"px"),a.$wrapper.height(a.$wrapper.height()+a.$pages.outerHeight(!0))):b.error(e.selector+": Unable to setup pagination due to unrecgonized TYPE value")};
a.getSizeTerm=function(){return"v"==a.settings.TYPE.substr(0,1)?"height":"width"};a.init()};b.carousel.defaults={makeControls:!0,makePagination:!1,makePlayPause:!1,direction:"tb",duration:!1,speed:!1,step:!1,show:4,wrap:"circular",mode:"manual",transition:"slide",buffer:!1,wrapTag:">div",wrapAt:!1,maskSize:88,prevBtnInner:function(){return"&nbsp;"},nextBtnInner:function(){return"&nbsp;"},pageInner:function(){return"&nbsp;"},onComplete:null};b.fn.carousel=function(d,f){if("function"==typeof d)if("object"==
typeof f)var e=f,f=d,d=e;else f=d,d={};if((typeof d).match("object|undefined")){var h=this;this.each(function(){new b.carousel(this,d,h,f)})}return this}})(jQuery);